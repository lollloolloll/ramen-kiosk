{
	"meta": {
		"generatedAt": "2025-11-07T01:17:16.884Z",
		"tasksAnalyzed": 5,
		"totalTasks": 23,
		"analysisCount": 5,
		"thresholdScore": 5,
		"projectName": "Taskmaster",
		"usedResearch": false
	},
	"complexityAnalysis": [
		{
			"taskId": 20,
			"taskTitle": "아이템 숨김 기능 추가",
			"complexityScore": 4,
			"recommendedSubtasks": 3,
			"expansionPrompt": "Drizzle 스키마에 `is_hidden` 컬럼을 추가하고 마이그레이션을 실행합니다. 관리자 아이템 관리 UI에 숨김/표시 전환 버튼을 추가하고, 해당 상태를 업데이트하는 서버 액션을 구현합니다. 키오스크 페이지에서 아이템을 조회할 때 `is_hidden`이 `true`인 아이템을 제외하도록 쿼리를 수정합니다.",
			"reasoning": "기존 Drizzle 스키마에 컬럼을 추가하고 마이그레이션을 실행하는 것은 간단합니다. 관리자 페이지는 기존 아이템 관리 UI에 버튼 하나를 추가하고 서버 액션을 통해 상태를 업데이트하는 방식으로 구현할 수 있습니다. 키오스크 페이지의 쿼리 수정은 `WHERE` 절에 간단한 조건만 추가하면 되므로 복잡도가 낮습니다. 기존에 잘 구축된 Drizzle, Next.js 서버 액션, UI 컴포넌트 환경이 있어 빠르게 구현할 수 있습니다."
		},
		{
			"taskId": 21,
			"taskTitle": "성별별 대여 통계 기능 추가",
			"complexityScore": 6,
			"recommendedSubtasks": 4,
			"expansionPrompt": "`generalUsers` 테이블에 `gender` 컬럼이 없다면 추가하고 마이그레이션을 실행합니다. `rentalRecords`와 `generalUsers` 테이블을 조인하여 성별 대여 통계를 집계하는 Drizzle 쿼리 및 서버 액션을 구현합니다. 관리자 대시보드의 `RentalAnalyticsClient.tsx`에 해당 통계를 시각적으로 표시하는 UI 컴포넌트(차트 또는 테이블)를 추가하고, 기존 필터링 기능과 연동합니다.",
			"reasoning": "성별 컬럼 추가 및 마이그레이션은 비교적 간단합니다. 하지만 `rentalRecords`와 `generalUsers` 테이블을 조인하고 성별로 그룹화하여 집계하는 Drizzle 쿼리 로직은 중급 수준의 복잡도를 가집니다. 이를 위한 서버 액션을 구현하고, 관리자 대시보드에 통계를 시각화하는 UI 컴포넌트를 추가하는 것도 고려해야 할 사항입니다. 차트 라이브러리 선택 및 통합에 따라 추가적인 노력이 필요할 수 있습니다."
		},
		{
			"taskId": 22,
			"taskTitle": "아이템/사용자 삭제 시 대여 기록 보존",
			"complexityScore": 5,
			"recommendedSubtasks": 3,
			"expansionPrompt": "Drizzle 스키마에서 `rentalRecords` 테이블의 `itemId`와 `userId` 컬럼을 `nullable`로 변경하고, 외래 키 제약조건을 `ON DELETE CASCADE`에서 `ON DELETE SET NULL`로 수정합니다. 마이그레이션을 실행하여 데이터베이스에 반영하고, 기존 아이템/사용자 삭제 로직 및 관련 UI에서 `NULL` 값 처리가 필요한지 검토합니다. 'soft delete' 도입은 별도의 논의와 태스크로 분리하여 진행합니다.",
			"reasoning": "Drizzle 스키마에서 외래 키 제약 조건을 변경하고 컬럼을 `nullable`로 만드는 것은 비교적 명확한 작업입니다. 마이그레이션 시 기존 데이터 무결성을 유지하는 데 주의가 필요하지만, Drizzle의 기능을 활용하면 어렵지 않습니다. 'soft delete'를 포함할 경우 복잡도가 크게 증가하지만, 현재는 외래 키 변경에 중점을 둡니다. 변경 후 UI 또는 다른 비즈니스 로직에서 `NULL` 값에 대한 추가적인 처리가 필요한지 검토하는 것이 중요합니다."
		},
		{
			"taskId": 23,
			"taskTitle": "특정 품목 시간제 대여 및 대기자 관리 기능 구현",
			"complexityScore": 9,
			"recommendedSubtasks": 6,
			"expansionPrompt": "`items` 테이블에 `isTimeLimited`, `rentalTimeMinutes`, `maxRentalsPerUser` 컬럼을 추가하고, `waiting_queue` 테이블을 신규 생성하는 Drizzle 스키마 업데이트 및 마이그레이션을 실행합니다. 관리자 페이지의 아이템 관리 UI에 새로운 설정 필드를 추가합니다. 키오스크 대여 로직을 전면 수정하여 시간제 대여, 사용자별 횟수 제한, 대기자 명단 추가/관리 기능을 구현합니다. 반납 시 대기자에게 다음 기회를 부여하는 로직과 만료된 대여를 처리하는 메커니즘을 구축합니다.",
			"reasoning": "이 태스크는 새로운 테이블 생성, 기존 테이블에 여러 컬럼 추가 등 광범위한 스키마 변경을 포함합니다. 또한 시간제 대여, 대여 횟수 제한, 대기자 명단 관리와 같은 복잡한 비즈니스 로직이 기존 대여 로직에 통합되어야 합니다. 이는 데이터 모델, 서버 액션, 그리고 키오스크와 관리자 UI 모두에 걸쳐 상당한 수정이 필요합니다. 동시성 문제, 대기열 순서, 대여 만료 처리 등 고려해야 할 시스템 설계 측면의 복잡성이 매우 높습니다."
		},
		{
			"taskId": 24,
			"taskTitle": "사용자 등록 시 개인정보 동의 파일 업로드 기능 추가",
			"complexityScore": 7,
			"recommendedSubtasks": 5,
			"expansionPrompt": "Drizzle 스키마에 `generalUsers` 테이블에 `consentFilePath` 컬럼을 추가하고 마이그레이션을 실행합니다. 관리자 페이지의 사용자 추가 폼(`AddUserForm.tsx`)에 파일 업로드 필드를 추가합니다. 서버 액션에서 `multipart/form-data`를 파싱하고, 업로드된 파일의 유효성을 검사(확장자, 크기 등)한 뒤 서버의 지정된 경로에 안전하게 저장하는 로직을 구현합니다. 파일 경로를 사용자 정보와 함께 데이터베이스에 저장하도록 사용자 생성 서버 액션을 수정합니다.",
			"reasoning": "단순한 데이터베이스 컬럼 추가와 UI 필드 추가는 간단하지만, 파일 업로드 기능은 서버 측에서 `multipart/form-data` 처리, 파일 시스템 접근, 파일 유효성 검사 및 보안(악성 파일 업로드 방지) 등 추가적인 복잡성을 수반합니다. Next.js 서버 액션 환경에서 파일 업로드를 안전하고 효율적으로 구현하는 것은 중급 이상의 기술 지식을 요구하며, 서버 리소스 관리 및 잠재적인 보안 취약점을 고려해야 합니다."
		}
	]
}